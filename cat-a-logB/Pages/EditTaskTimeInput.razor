@using ApexCharts;
@using cat_a_logB.Data;
@inject cat_a_logB.Pages.SampleData SampleData
@inject cat_a_logB.Data.TaskManager TaskManager
<form>
    <div class="form-group">
        <label for="newTaskStartTime">Start Date:</label>
        <input type="date" class="form-control" id="newTaskStartTime" @bind="newTaskStartTime" />
    </div>
    <div class="form-group">
        <label for="newTaskEndTime">End Date:</label>
        <input type="date" class="form-control" id="newTaskEndTime" @bind="newTaskEndTime" />
    </div>
    <br>
    <button type="button" class="btn btn-success" @onclick="UpdateTaskTime">Update Task Time</button>
</form>

@if (TaskManager.newTaskStartTime >= TaskManager.newTaskEndTime)
{
    <div class="alert alert-danger" role="alert">@TaskManager.errorMessage</div>
}


@code {

    [Parameter] public SelectedData<TaskData> selectedData { get; set; }
    [Parameter] public List<TaskData> project { get; set; }
    [Parameter] public ApexChart<TaskData> chart { get; set; }
    [Parameter] public EventCallback OnClose { get; set; }
    private DateTime newTaskStartTime = DateTime.Today;
    private DateTime newTaskEndTime = DateTime.Today.AddDays(1);
    public string errorMessage = "";

    private async Task UpdateTaskTime()
    {
        await TaskManager.EditTaskTime(project, chart, selectedData, OnClose, newTaskStartTime, newTaskEndTime);

    }
}